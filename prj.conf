# Gophyr - Gopher Protocol Client Configuration

# Basic system configuration
CONFIG_EARLY_CONSOLE=y
CONFIG_CONSOLE=y
CONFIG_CONSOLE_SUBSYS=y
CONFIG_CONSOLE_GETCHAR=y

# Stack sizes - increased for better stability
CONFIG_MAIN_STACK_SIZE=8192
CONFIG_SHELL_STACK_SIZE=8192
CONFIG_NET_TX_STACK_SIZE=2048
CONFIG_NET_RX_STACK_SIZE=2048

# Networking configuration
CONFIG_NETWORKING=y
CONFIG_TEST_RANDOM_GENERATOR=y
CONFIG_NET_IPV4=y
CONFIG_NET_IPV6=n
CONFIG_NET_TCP=y
CONFIG_NET_UDP=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_DHCPV4=y
CONFIG_DNS_RESOLVER=y

# Network buffer configuration - increased for more reliable networking
CONFIG_NET_PKT_RX_COUNT=16
CONFIG_NET_PKT_TX_COUNT=16
CONFIG_NET_BUF_RX_COUNT=32
CONFIG_NET_BUF_TX_COUNT=32
CONFIG_NET_MAX_CONTEXTS=16

# Wifi configuration
CONFIG_WIFI=y
CONFIG_NET_L2_WIFI_SHELL=y
CONFIG_NET_MGMT_EVENT_QUEUE_TIMEOUT=5000
CONFIG_NET_MGMT_EVENT_QUEUE_SIZE=16

# Shell configuration
CONFIG_NET_SHELL=y
CONFIG_SHELL_VT100_COLORS=y
CONFIG_SHELL_METAKEYS=y

# Memory management
# Increase heap size for image processing and networking
CONFIG_HEAP_MEM_POOL_SIZE=98304

# SPIRAM (PSRAM) configuration for ESP32
CONFIG_ESP32_USE_UNSUPPORTED_REVISION=y
CONFIG_ESP_SPIRAM=y
CONFIG_ESP_SPIRAM_SIZE=8388608
CONFIG_ESP_SPIRAM_HEAP_SIZE=4096000
CONFIG_SPIRAM_MODE_OCT=y
CONFIG_SHARED_MULTI_HEAP=y

# Logging configuration - use these for debugging
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_NET_LOG=y
CONFIG_INIT_STACKS=y

# Network statistics
CONFIG_NET_STATISTICS=y
CONFIG_NET_STATISTICS_PERIODIC_OUTPUT=n

# Socket and network optimization to prevent memory issues
CONFIG_NET_SOCKETS_POLL_MAX=12
CONFIG_NET_CONTEXT_SYNC_RECV=y
CONFIG_NET_BUF_POOL_USAGE=y

# TCP configuration to improve socket handling
CONFIG_NET_TCP_TIME_WAIT_DELAY=3000
CONFIG_NET_TCP_MAX_SEND_WINDOW_SIZE=8192
CONFIG_NET_TCP_RECV_QUEUE_TIMEOUT=5000
